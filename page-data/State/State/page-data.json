{"componentChunkName":"component---src-templates-post-template-tsx","path":"/State/State/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>React에서의 setState 비동기 동작과 클로저</h2>\n<p>React에서 상태를 관리할 때 <code class=\"language-text\">useState</code>와 <code class=\"language-text\">setState</code>를 사용하는 것은 중요한 부분이다.\n특히 <code class=\"language-text\">setState</code>의 비동기 동작과 클로저의 개념은 아직까지도 헷가릴때가 있다.\n<code class=\"language-text\">setState</code>의 비동기 동작과 클로저의 관계에 대해 알아보고, 주의할 점들을 살펴보자.</p>\n<h3><code class=\"language-text\">setState</code>의 비동기 동작</h3>\n<p>React의 <code class=\"language-text\">setState</code> 함수는 상태를 업데이트할 때 비동기적으로 동작한다. 이는 상태를 즉시 변경하지 않고, React가 상태 업데이트를 일괄 처리하고 다음 렌더링 사이클에서 업데이트된 상태를 반영한다는 의미 이로 인해 예상치 못한 결과가 발생할 수 있으므로 주의가 필요하다.</p>\n<p>예를 들어,</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 이 부분은 업데이트된 count 값을 반영하지 않을 수 있습니다.</span></code></pre></div>\n<p>위 코드에서 setCount(count + 1)이 호출되면 count 상태가 즉시 업데이트되는 것이 아니라, React가 상태 업데이트를 일괄 처리한다. 따라서 console.log(count)의 출력은 업데이트된 count 값을 반영하지 않을 수 있다.</p>\n<p>이를 해결하기 위해서는 setCount 함수에 함수를 전달하여 이전 상태를 사용하는 방법:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Copy code\n<span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevCount</span> <span class=\"token operator\">=></span> prevCount <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>클로저와 setState</h3>\n<p>React 컴포넌트 내부에서 함수를 정의할 때, 클로저의 개념이 중요하다. 내부 함수에서 외부 함수의 상태를 참조할 때, 해당 상태는 클로저에 의해 해당 함수의 렉시컬 스코프(lexical scope)에 캡쳐된다. 그러나 setState가 비동기적으로 동작하기 때문에, 외부 함수가 종료된 이후에도 내부 함수가 실행될 수 있다. 이 경우에는 클로저가 외부 함수의 상태를 캡쳐하지만, 그 상태가 이미 업데이트되었을 수 있으므로 내부 함수에서 상태를 참조할 때 최신 값을 가져오지 못할 수 있다.</p>\n<p>++<em><strong>렉시컬 스코프(lexical scope)란?</strong></em>  함수가 선언될 때의 스코프를 의미합니다. 함수가 어디에서 호출되었는지가 아니라, 함수가 어디에 선언되었는지에 따라 해당 함수가 접근할 수 있는 변수의 범위가 결정됩니다.</p>\n<h3>주의사항</h3>\n<p>setState를 사용할 때는 상태 업데이트 이후에 원하는 동작을 수행하기 위해 setState의 콜백 함수나 useEffect 훅을 활용해야 한다.\n내부 함수에서 상태를 참조할 때는 최신 값을 가져오기 위해 클로저를 활용하는 것이 중요하다.\nReact에서 상태 관리는 매우 중요한 부분이므로, 이러한 동작 원리와 주의사항을 숙지하고 사용하는 것이 좋을것 같다.</p>","frontmatter":{"title":"비동기 동작과 클로저 in React","summary":"React에서의 setState 비동기 동작과 클로저","date":"2023.04.20.","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAACkElEQVQozx3KWVMScQAA8P0sqTPpTJodL01ZWc0QBh4cFooce7CwrLD8dxeXU+QSlfsOOQS5RkRARaSxyWa6nnvPmT5Fj03N/B5/UABgAYBFGDTF4e+teMyxfljK59Ox8247n02dn560GvWDg6IakBo7i9lo1ArgDYoEeMUyD+3SGrdB5SP/cb99XSRF+UTksJCrHhRajWq9Um7WG7lsRsNSGjuLWgHCmVRmEw60JW4BirKYn1IlLXiQQuKKFzeRpT41F6fhMK2OmpEggzi1sAMgqBXgVlprNTE0qWQAQuEFswAKAMy7rkpwml0TVrXI/4R5X02v4jRa5pQ9Th4CsEWnYGgS4UwOo6TmIqpOvYKmlBSRNQshtxFzEOogjfmN8C6N/tzkf2cEUYAM3fKbsKxiIfNu2GLXIWbg91KVjRXGoFPQhjWKTLPz0JYB5XCli0BderhkIz6jDz2SZxEWDhr1XY0wzYgSeZ4biE9y1t/HLEdhKE1QprVVSh9l5qHNdWTLgLqNiN+INjV307oZn2Q0uPdk2DH8+sZeRqat7ufaxZkfBeQoJjDCEkIhJRRSjXw5CoSQUw879bCDUPv1q188j+rsrFMy5QGzrTLvaigMo0852TsbSpEKMalYIuUi/eoivcK3q/gFywLkW3oQEN3fE9+LSqfayNi+bCwjubUvG8kjvDIQIXOPX96ZpPgzPuGE7824VzD+/9/ek03G5VNQbnmykw21476zUqSe9BVTiXQ8Uo150qx602VLJpPBUKCW2ulXMu1cuJkJVZM7tYR3WzASFo1A+8vT9WLuetAftGufLrofLvq9085Jo9gMOYa9o4tu62p4ltt2XQ/OPvZ7l6ed83Zr0DsOiyey0tG/6BI+VPSyo9sAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/ca40685574dd18674484a202e4216fd3/ace63/closures.webp","srcSet":"/static/ca40685574dd18674484a202e4216fd3/8ab1a/closures.webp 141w,\n/static/ca40685574dd18674484a202e4216fd3/97550/closures.webp 283w,\n/static/ca40685574dd18674484a202e4216fd3/ace63/closures.webp 565w","sizes":"(min-width: 565px) 565px, 100vw"},"sources":[]},"width":565,"height":299}},"publicURL":"/static/ca40685574dd18674484a202e4216fd3/closures.png"}}}}]}},"pageContext":{"slug":"/State/State/"}},"staticQueryHashes":[]}