{"componentChunkName":"component---src-templates-post-template-tsx","path":"/React18/React18/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>React 18</h2>\n<h3>automatic batching</h3>\n<ul>\n<li>\n<p>배칭(batching)은 리액트가 더 나은 성능을 위해 여러개의 state(상태) 업데이트를  하나의\nre-render 가 발생하도록 그룹화 하는 것을 의미한다.</p>\n</li>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 아직 리렌더링 X setFlag(f => !f);</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>flag<span class=\"token punctuation\">,</span> setFlag<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 아직 리렌더링 X</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// React는 함수가 끝나면 리렌더링   할 것이다 (-> 이것이 배칭)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>• React 18부터 <a href=\"https://github.com/reactwg/react-18/discussions/5\" target=\"_blank\" rel=\"nofollow\">createRoot</a>를 통해, 모든 업데이트들은 어디서 왔는가와 무관하게 자동으로 배칭된다.</p>\n</li>\n</ul>\n<h3>startTransition</h3>\n<ul>\n<li>각 상태 업데이트에 대한 우선순위를 정해줄 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> startTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Urgent: Show what was typed</span>\n<span class=\"token function\">setInputValue</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Mark any state updates inside as transitions</span>\n<span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// Transition: Show the results</span>\n<span class=\"token function\">setSearchQuery</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>• <code class=\"language-text\">startTransition</code> 으로 둘러싸인 부분은 클릭이나 키 입력에 의해 우선순위 높은 상태 업데이트가 발생하게 되면 렌더링 업데이트가 중단되고 키 입력이 다 끝난 이후의 업데이트만 발생하게 된다.</p>\n<p>• <code class=\"language-text\">useTransition</code> 훅을 이용해 <code class=\"language-text\">&lt;Spinner/></code>와 같은 UI를 표시해줄 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">{</span>isPending <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>Spinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>• 크게 리엑트가 UI 업데이트를 위해 크고 복잡한 일을 함으로 써 대기 시간이 발생하거나 느린 네트워크 환경에서 데이터를 받아오기 위해 기다리는 상황에서 사용한다고 한다.</p>\n<h3>new Suspense SSR Architecture</h3>\n<p>• 만약에 4번이 관련된 리소스가 커서 로드되는데 오래걸린다면, 1, 2, 3도 4번이 로드될때까지 꼼짝없이 기다려야 된다.</p>\n<p>•<code class=\"language-text\">&lt;Suspense></code> 는 전체 페이지를 각각의 작은 청크로 나누어 렌더링할 수 있게 도와준다.\n응답을 받는데 오래걸리는 컴포넌트에는 <code class=\"language-text\">&lt;Suspense></code>를 사용해 나머지 영역의 초기 렌더링 속도에 영향을 미치지 않게 할 수 있다.</p>","frontmatter":{"title":"React18 변경사항","summary":"React18에 새롭게 추가된 사항을 간단히 살펴보자!","date":"2022.03.07.","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQoz6WSXUsCQRSG/RmFOnPOzOy4u44f1X64mLB+JYFCUEmykmWsF2FIl4IJQXRTeREE/dxQF1ToQms4F3PgPGfmvO+JsX+c2EbGRRS7wggAyQQQAskEQ2Scz2MbGAG0tMpUGqZXUn6dcYGUIiXrpYg4bwqAAPPLEuZC0P29XKNVHI79ybs3eEzlD4VuGnYBKUGgSClD5FJyKUXK0EzFhcYYxhjnSIhuuYXbh+rzZ3k6qzx9HLQu7U6/PHlzgvDoomt3+la7Z7WvDbfoBGFpNFH+CSTiCxioVFmnO6i+fNVev8vTWe70LH3s55vnThDaQVi4G1ntXrbe1EyV8evWVV93PCTJ1beVX3Nv7ovDsROEMpuHeBwJQYBo1JWuNJp/pTaikCnD8YSR1m1vYdu62rju528+Iy6fgk2Rt16SqCv/G7zbev4AcSl31+hf3SQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/c6673f70aeb1194887fc8ea5bcd92697/28df3/React18.png","srcSet":"/static/c6673f70aeb1194887fc8ea5bcd92697/6dee0/React18.png 263w,\n/static/c6673f70aeb1194887fc8ea5bcd92697/0bdce/React18.png 525w,\n/static/c6673f70aeb1194887fc8ea5bcd92697/28df3/React18.png 1050w","sizes":"(min-width: 1050px) 1050px, 100vw"},"sources":[{"srcSet":"/static/c6673f70aeb1194887fc8ea5bcd92697/cfa96/React18.webp 263w,\n/static/c6673f70aeb1194887fc8ea5bcd92697/aa3bb/React18.webp 525w,\n/static/c6673f70aeb1194887fc8ea5bcd92697/62ca3/React18.webp 1050w","type":"image/webp","sizes":"(min-width: 1050px) 1050px, 100vw"}]},"width":1050,"height":612}},"publicURL":"/static/c6673f70aeb1194887fc8ea5bcd92697/React18.png"}}}}]}},"pageContext":{"slug":"/React18/React18/"}},"staticQueryHashes":[]}